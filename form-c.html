<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Form C – Site Supervisor – Evaluation Form</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body {
      background: #fff;
      min-height: 100vh;
      margin: 0;
      padding: 0;
    }
    .form-card {
      padding: 0;
      background: transparent;
      border: none;
      box-shadow: none;
      border-radius: 0;
    }
    
    @media (max-width: 768px) {
      .form-card { 
        padding: 0;
        margin: 0;
      }
    }
    
    @media (max-width: 576px) {
      .form-card { 
        padding: 0;
        margin: 0;
      }
      
      h3 {
        font-size: 1.1rem !important;
        line-height: 1.3;
      }
      
      .section-title { 
        font-size: 0.95rem; 
        margin-top: 1.25rem;
        padding-left: 0.5rem;
      }
      
      .key-section {
        padding: 0.75rem;
        font-size: 0.85rem;
        margin: 1rem 0;
      }
      
      .evaluation-item {
        padding: 0.75rem;
        margin-bottom: 0.75rem;
      }
      
      .evaluation-question {
        font-size: 0.9rem;
        margin-bottom: 0.5rem;
        line-height: 1.3;
      }
      
      .form-check-label {
        font-size: 0.9rem;
      }
      
      .btn {
        font-size: 0.9rem;
        padding: 0.6rem 1rem;
      }
    }
    .section-title {
      font-size: 1.1rem;
      color: #0d6efd;
      border-left: 4px solid #0d6efd;
      padding-left: 0.75rem;
      margin-bottom: 0.5rem;
      margin-top: 2rem;
      font-weight: 600;
      letter-spacing: 0.5px;
    }
    .form-control:focus {
      box-shadow: 0 0 0 0.2rem rgba(13,110,253,.15);
      border-color: #0d6efd;
    }
    .btn-custom {
      transition: background 0.2s, color 0.2s, box-shadow 0.2s;
      box-shadow: 0 2px 8px rgba(13,110,253,0.08);
    }
    .btn-custom:hover, .btn-custom:focus {
      background: #0b5ed7 !important;
      color: #fff !important;
      box-shadow: 0 4px 16px rgba(13,110,253,0.15);
    }
    .rating-radio {
      width: 18px;
      height: 18px;
      margin: 0 auto;
    }
    .evaluation-table th {
      background-color: #f8f9fa;
      font-weight: 600;
      text-align: center;
      vertical-align: middle;
    }
    .evaluation-table td {
      text-align: center;
      vertical-align: middle;
      padding: 0.75rem 0.5rem;
    }
    .evaluation-table .criteria-text {
      text-align: left;
      font-weight: 500;
    }
    .key-section {
      background-color: #f8f9fa;
      border-radius: 8px;
      padding: 1rem;
      margin: 1.5rem 0;
      border-left: 4px solid #0d6efd;
    }
    /* Minimal Custom CSS - Using Bootstrap grid only */
    .evaluation-item {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1rem;
      border-left: 3px solid #0d6efd;
    }
    
    .evaluation-question {
      font-weight: 600;
      color: #495057;
      margin-bottom: 0.75rem;
    }
    
    /* Make radio buttons more touch-friendly on mobile */
    .form-check-input {
      margin-top: 0.125rem;
    }
    
    @media (max-width: 576px) {
      .d-flex.gap-4 {
        gap: 0.75rem !important;
        justify-content: space-between !important;
      }
      
      .form-check {
        flex: 1;
        text-align: center;
      }
      
      .form-check-input {
        margin: 0 auto 0.25rem auto;
        display: block;
      }
      
      .form-check-label {
        display: block;
        text-align: center;
        margin: 0;
      }
    }
    
    @media print {
      .no-print { display: none !important; }
      .form-control, input[type="text"], textarea {
        border: none !important;
        box-shadow: none !important;
        background: transparent !important;
      }
      input[type="radio"], input[type="checkbox"] {
        pointer-events: none;
      }
    }
    
    /* Large screen optimizations */
    @media (min-width: 1200px) {
      .container-fluid {
        padding: 2rem 4rem !important;
      }
      .table {
        font-size: 1rem;
      }
      .form-control {
        font-size: 1rem;
        padding: 0.75rem 1rem;
      }
      h3 {
        font-size: 2rem !important;
        margin-bottom: 2rem !important;
      }
      .section-title {
        font-size: 1.25rem;
        margin-top: 2.5rem;
        margin-bottom: 1rem;
      }
    }
    
    @media (min-width: 1400px) {
      .container-fluid {
        padding: 3rem 6rem !important;
      }
      .table {
        font-size: 1.1rem;
      }
      .table td, .table th {
        padding: 1rem !important;
      }
      .form-control {
        font-size: 1.1rem;
        padding: 1rem 1.25rem;
      }
      h3 {
        font-size: 2.5rem !important;
        margin-bottom: 3rem !important;
      }
      .section-title {
        font-size: 1.5rem;
        margin-top: 3rem;
        margin-bottom: 1.5rem;
      }
      .key-section {
        font-size: 1.1rem;
        padding: 1.5rem;
      }
    }
  </style>
</head>
<body>

<div class="container-fluid px-0 my-0">
  <div class="row justify-content-center g-0">
    <div class="col-12">
      <form id="formC">
        <div class="form-card px-2 px-md-4 py-3" id="printArea">

          <h3 class="text-center text-primary mb-3 mb-md-4 fw-bold">Form C – Site Supervisor – Evaluation Form</h3>

          <p class="small mb-3 text-center text-secondary">
            The Site Supervisor is required to complete the form and return the signed copy to the Faculty Supervisor either through official email or by post in a sealed and stamped envelope at the conclusion of the internship period during the Summer Semester.
          </p>

          <div class="text-end small mb-3">
            <div class="d-flex justify-content-end align-items-center flex-wrap gap-2">
              <label class="fw-bold mb-0">Date:</label>
              <span class="form-control d-inline-block text-center" style="width: 180px; background-color: #f8f9fa;" id="currentDate"></span>
            </div>
            <input type="hidden" name="date" id="dateField">
          </div>
          
          <!-- Bootstrap Grid Layout - Responsive for all screen sizes -->
          <div class="row g-3 mb-4">
            <div class="col-12 col-md-6">
              <label class="form-label fw-semibold">Site Supervisor</label>
              <input type="text" class="form-control" name="site_supervisor" placeholder="Enter supervisor name">
            </div>
            <div class="col-12 col-md-6 ">
              <label class="form-label fw-semibold">Designation</label>
              <input type="text" class="form-control" name="designation" placeholder="Enter designation">
            </div>
            
            <div class="col-12">
              <label class="form-label fw-semibold">Host Institution</label>
              <input type="text" class="form-control" name="host_institution" placeholder="Enter institution name">
            </div>
            
            <div class="col-12">
              <label class="form-label fw-semibold">Student Intern Name</label>
              <input type="text" class="form-control" name="student_name" placeholder="Enter student name">
            </div>
            
            <div class="col-12 col-md-6">
              <label class="form-label fw-semibold">Student Program</label>
              <input type="text" class="form-control" name="student_program" placeholder="Enter program">
            </div>
            <div class="col-12 col-md-6">
              <label class="form-label fw-semibold">Semester</label>
              <input type="text" class="form-control" name="semester" placeholder="Enter semester">
            </div>
            
            <div class="col-12">
              <label class="form-label fw-semibold">Starting Date of Internship</label>
              <input type="text" class="form-control" name="start_date" placeholder="Enter starting date">
            </div>
            <div class="col-12">
              <label class="form-label fw-semibold">Ending Date of Internship</label>
              <input type="text" class="form-control" name="end_date" placeholder="Enter ending date">
            </div>
            
            <div class="col-12">
              <label class="form-label fw-semibold">Internship Duration <small>(Select any one)</small></label>
              <div class="d-flex gap-4 flex-wrap">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="duration" value="6" id="duration6">
                  <label class="form-check-label" for="duration6">6 Weeks</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="duration" value="8" id="duration8">
                  <label class="form-check-label" for="duration8">8 Weeks</label>
                </div>
              </div>
            </div>
          </div>

          <!-- Key Section -->
          <div class="key-section">
            <h6 class="mb-2"><strong>Key</strong></h6>
            <div class="row">
              <div class="col-md-6">
                <small>1 = Does not meet expectations</small><br>
                <small>3 = Consistently Meets expectations</small><br>
                <small>Expectations 5 = Far above expectations</small>
              </div>
              <div class="col-md-6">
                <small>2 = Inconsistently meets expectations</small><br>
                <small>4 = Above</small>
              </div>
            </div>
          </div>

          <!-- Evaluation Criteria -->
          <div class="section-title">Circle the number that best describes the Student Intern's Performance</div>
          
          <!-- Bootstrap Grid Layout for Evaluation Criteria -->
          <div class="row g-3 mb-4">
            <div class="col-12">
              <div class="evaluation-item">
                <div class="evaluation-question">1. Arrives to work on time / Available online as per schedule</div>
                <div class="d-flex gap-4 flex-wrap justify-content-center">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_1" value="1" id="rating_1_1">
                    <label class="form-check-label" for="rating_1_1">1</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_1" value="2" id="rating_1_2">
                    <label class="form-check-label" for="rating_1_2">2</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_1" value="3" id="rating_1_3">
                    <label class="form-check-label" for="rating_1_3">3</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_1" value="4" id="rating_1_4">
                    <label class="form-check-label" for="rating_1_4">4</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_1" value="5" id="rating_1_5">
                    <label class="form-check-label" for="rating_1_5">5</label>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-12">
              <div class="evaluation-item">
                <div class="evaluation-question">2. Demonstrates respect for organizational staff, policies, and norms</div>
                <div class="d-flex gap-4 flex-wrap justify-content-center">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_2" value="1" id="rating_2_1">
                    <label class="form-check-label" for="rating_2_1">1</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_2" value="2" id="rating_2_2">
                    <label class="form-check-label" for="rating_2_2">2</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_2" value="3" id="rating_2_3">
                    <label class="form-check-label" for="rating_2_3">3</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_2" value="4" id="rating_2_4">
                    <label class="form-check-label" for="rating_2_4">4</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_2" value="5" id="rating_2_5">
                    <label class="form-check-label" for="rating_2_5">5</label>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-12">
              <div class="evaluation-item">
                <div class="evaluation-question">3. Shows requisite understanding and ability to learn about organizational work</div>
                <div class="d-flex gap-4 flex-wrap justify-content-center">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_3" value="1" id="rating_3_1">
                    <label class="form-check-label" for="rating_3_1">1</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_3" value="2" id="rating_3_2">
                    <label class="form-check-label" for="rating_3_2">2</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_3" value="3" id="rating_3_3">
                    <label class="form-check-label" for="rating_3_3">3</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_3" value="4" id="rating_3_4">
                    <label class="form-check-label" for="rating_3_4">4</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_3" value="5" id="rating_3_5">
                    <label class="form-check-label" for="rating_3_5">5</label>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-12">
              <div class="evaluation-item">
                <div class="evaluation-question">4. Exhibits necessary skills required at the workplace</div>
                <div class="d-flex gap-4 flex-wrap justify-content-center">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_4" value="1" id="rating_4_1">
                    <label class="form-check-label" for="rating_4_1">1</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_4" value="2" id="rating_4_2">
                    <label class="form-check-label" for="rating_4_2">2</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_4" value="3" id="rating_4_3">
                    <label class="form-check-label" for="rating_4_3">3</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_4" value="4" id="rating_4_4">
                    <label class="form-check-label" for="rating_4_4">4</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_4" value="5" id="rating_4_5">
                    <label class="form-check-label" for="rating_4_5">5</label>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-12">
              <div class="evaluation-item">
                <div class="evaluation-question">5. Conducts self professionally in all work-related scenarios</div>
                <div class="d-flex gap-4 flex-wrap justify-content-center">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_5" value="1" id="rating_5_1">
                    <label class="form-check-label" for="rating_5_1">1</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_5" value="2" id="rating_5_2">
                    <label class="form-check-label" for="rating_5_2">2</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_5" value="3" id="rating_5_3">
                    <label class="form-check-label" for="rating_5_3">3</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_5" value="4" id="rating_5_4">
                    <label class="form-check-label" for="rating_5_4">4</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_5" value="5" id="rating_5_5">
                    <label class="form-check-label" for="rating_5_5">5</label>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-12">
              <div class="evaluation-item">
                <div class="evaluation-question">6. Takes initiative and seeks opportunities to make contributions</div>
                <div class="d-flex gap-4 flex-wrap justify-content-center">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_6" value="1" id="rating_6_1">
                    <label class="form-check-label" for="rating_6_1">1</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_6" value="2" id="rating_6_2">
                    <label class="form-check-label" for="rating_6_2">2</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_6" value="3" id="rating_6_3">
                    <label class="form-check-label" for="rating_6_3">3</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_6" value="4" id="rating_6_4">
                    <label class="form-check-label" for="rating_6_4">4</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_6" value="5" id="rating_6_5">
                    <label class="form-check-label" for="rating_6_5">5</label>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-12">
              <div class="evaluation-item">
                <div class="evaluation-question">7. Completes tasks and reports to supervisor on time</div>
                <div class="d-flex gap-4 flex-wrap justify-content-center">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_7" value="1" id="rating_7_1">
                    <label class="form-check-label" for="rating_7_1">1</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_7" value="2" id="rating_7_2">
                    <label class="form-check-label" for="rating_7_2">2</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_7" value="3" id="rating_7_3">
                    <label class="form-check-label" for="rating_7_3">3</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_7" value="4" id="rating_7_4">
                    <label class="form-check-label" for="rating_7_4">4</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_7" value="5" id="rating_7_5">
                    <label class="form-check-label" for="rating_7_5">5</label>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-12">
              <div class="evaluation-item">
                <div class="evaluation-question">8. Demonstrates the ability to work with others in a team</div>
                <div class="d-flex gap-4 flex-wrap justify-content-center">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_8" value="1" id="rating_8_1">
                    <label class="form-check-label" for="rating_8_1">1</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_8" value="2" id="rating_8_2">
                    <label class="form-check-label" for="rating_8_2">2</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_8" value="3" id="rating_8_3">
                    <label class="form-check-label" for="rating_8_3">3</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_8" value="4" id="rating_8_4">
                    <label class="form-check-label" for="rating_8_4">4</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_8" value="5" id="rating_8_5">
                    <label class="form-check-label" for="rating_8_5">5</label>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-12">
              <div class="evaluation-item">
                <div class="evaluation-question">9. Proves to be Reliable and Dependable</div>
                <div class="d-flex gap-4 flex-wrap justify-content-center">
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_9" value="1" id="rating_9_1">
                    <label class="form-check-label" for="rating_9_1">1</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_9" value="2" id="rating_9_2">
                    <label class="form-check-label" for="rating_9_2">2</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_9" value="3" id="rating_9_3">
                    <label class="form-check-label" for="rating_9_3">3</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_9" value="4" id="rating_9_4">
                    <label class="form-check-label" for="rating_9_4">4</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="rating_9" value="5" id="rating_9_5">
                    <label class="form-check-label" for="rating_9_5">5</label>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Agreement Section -->
          <div class="mt-4 mb-2">
            <div class="bg-light rounded p-3 mb-3 border-start border-primary border-3">
              <h6 class="mb-3 fw-bold text-primary">Supervisor Agreement:</h6>
              <div class="row g-3">
                <div class="col-12">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="supervisor_agreement" id="supervisorAgreement" required>
                    <label class="form-check-label" for="supervisorAgreement">
                      I acknowledge that the information provided in this evaluation is accurate and complete. I agree to supervise the student intern according to the terms and conditions of the internship program.
                    </label>
                  </div>
                </div>
                
                <div class="col-12">
                  <div class="text-end small">
                    <div class="d-flex justify-content-end align-items-center flex-wrap gap-2">
                      <label class="fw-bold mb-0">Date:</label>
                      <span class="form-control d-inline-block text-center" style="width: 180px; background-color: #f8f9fa;" id="supervisorCurrentDate"></span>
                    </div>
                    <input type="hidden" name="supervisor_date" id="supervisorDateField">
                  </div>
                </div>
                <div class="col-12 col-md-6">
                  <label class="form-label small">Contact Number:</label>
                  <input type="text" class="form-control" name="contact_number" placeholder="Enter contact">
                </div>
                <div class="col-12 col-md-6">
                  <label class="form-label small">Official Email:</label>
                  <input type="email" class="form-control" name="official_email" placeholder="Enter email">
                </div>
              </div>
            </div>
          </div>

        </div>

        <div class="text-center mt-4 no-print">
          <div class="d-flex flex-wrap gap-2 justify-content-center">
            <button type="button" class="btn btn-primary btn-custom" id="previewBtn">
              <i class="bi bi-eye me-1"></i> Preview
            </button>
            <button type="button" class="btn btn-success btn-custom" id="printBtn">
              <i class="bi bi-printer me-1"></i> Print
            </button>
            <button type="submit" class="btn btn-outline-primary btn-custom" id="submitBtn">
              <i class="bi bi-check-circle me-1"></i> Submit
            </button>
            <button type="reset" class="btn btn-outline-secondary btn-custom">
              <i class="bi bi-arrow-clockwise me-1"></i> Reset
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Preview Modal -->
<div class="modal fade" id="previewModal" tabindex="-1" aria-labelledby="previewModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="previewModalLabel">Site Supervisor Evaluation Form Preview</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="previewContent" style="background: #f8fafc;">
        <!-- Preview content will be injected here -->
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<style>
/* Preview Modal Enhancements */
#previewContent {
  padding: 2rem 1.5rem;
  background: #f8fafc;
  border-radius: 16px;
  box-shadow: 0 2px 16px rgba(0,0,0,0.07);
  font-size: 1.05rem;
  word-break: break-word;
}
#previewContent table {
  background: #fff;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 1px 6px rgba(0,0,0,0.04);
  margin-bottom: 1.5rem;
  table-layout: fixed;
  width: 100%;
}
#previewContent th, #previewContent td {
  word-break: break-word;
  white-space: pre-line;
  vertical-align: top;
  padding: 10px 8px;
}
#previewContent .section-title {
  font-weight: 600;
  color: #0d6efd;
  font-size: 1.08rem;
  margin-top: 1.5rem;
  margin-bottom: 0.5rem;
  border-left: 4px solid #0d6efd;
  padding-left: 0.7rem;
  background: #e7f1ff;
  border-radius: 6px;
  display: inline-block;
}
#previewContent div {
  margin-bottom: 0.7rem;
}

/* Mobile preview styles */
@media (max-width: 768px) {
  .modal-dialog {
    margin: 0.5rem;
    max-width: none;
  }
  
  #previewContent {
    padding: 1rem;
    font-size: 0.95rem;
  }
  
  #previewContent table {
    font-size: 0.85rem;
  }
  
  #previewContent th, #previewContent td {
    padding: 6px 4px;
  }
  
  #previewContent .section-title {
    font-size: 1rem;
    margin-top: 1rem;
  }
}

.input-error {
  border-color: #dc3545 !important;
  box-shadow: 0 0 0 0.2rem rgba(220,53,69,.15) !important;
}
.error-message {
  color: #dc3545;
  font-size: 0.95em;
  margin-top: 2px;
  margin-bottom: 4px;
}
</style>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const form = document.getElementById('formC');
  const previewModal = new bootstrap.Modal(document.getElementById('previewModal'));

    // Set current date
  const today = new Date();
  const formattedDate = today.toISOString().split('T')[0]; // YYYY-MM-DD format
  document.getElementById('currentDate').textContent = formattedDate;
  document.getElementById('dateField').value = formattedDate;
  
  // Set supervisor date
  document.getElementById('supervisorCurrentDate').textContent = formattedDate;
  document.getElementById('supervisorDateField').value = formattedDate;

  const requiredFields = [
    { name: 'site_supervisor', label: 'Site Supervisor' },
    { name: 'designation', label: 'Designation' },
    { name: 'host_institution', label: 'Host Institution' },
    { name: 'student_name', label: 'Student Intern Name' },
    { name: 'student_program', label: 'Student Program' },
    { name: 'semester', label: 'Semester' },
    { name: 'start_date', label: 'Starting Date of Internship' },
    { name: 'end_date', label: 'Ending Date of Internship' },
    { name: 'duration', label: 'Internship Duration' },
    { name: 'rating_1', label: 'Rating 1' },
    { name: 'rating_2', label: 'Rating 2' },
    { name: 'rating_3', label: 'Rating 3' },
    { name: 'rating_4', label: 'Rating 4' },
    { name: 'rating_5', label: 'Rating 5' },
    { name: 'rating_6', label: 'Rating 6' },
    { name: 'rating_7', label: 'Rating 7' },
    { name: 'rating_8', label: 'Rating 8' },
    { name: 'rating_9', label: 'Rating 9' },
    { name: 'contact_number', label: 'Contact Number' },
    { name: 'official_email', label: 'Official Email' },
    { name: 'supervisor_agreement', label: 'Supervisor Agreement' }
  ];

  function clearValidation() {
    form.querySelectorAll('.input-error').forEach(el => el.classList.remove('input-error'));
    form.querySelectorAll('.error-message').forEach(el => el.remove());
  }

  function showError(input, message) {
    input.classList.add('input-error');
    let error = document.createElement('div');
    error.className = 'error-message';
    error.innerText = message;
    if (input.type === 'radio') {
      // For radio, show error after the last radio in the group
      const radios = form.querySelectorAll(`input[name="${input.name}"]`);
      radios[radios.length-1].parentElement.appendChild(error);
    } else {
      input.parentElement.appendChild(error);
    }
  }

  function validateForm() {
    clearValidation();
    let valid = true;
    let firstInvalid = null;
    for (const field of requiredFields) {
      let input = form.querySelector(`[name="${field.name}"]`);
      if (!input) continue;
      if (input.type === 'radio') {
        // Check if duration is selected
        if (field.name === 'duration') {
          const checked = form.querySelector(`input[name="duration"]:checked`);
          if (!checked) {
            showError(input, `${field.label} is required.`);
            if (!firstInvalid) firstInvalid = input;
            valid = false;
          }
        } else {
          const checked = form.querySelector(`input[name="${field.name}"]:checked`);
          if (!checked) {
            showError(input, `${field.label} is required.`);
            if (!firstInvalid) firstInvalid = input;
            valid = false;
          }
        }
      } else if (input.type === 'checkbox') {
        if (!input.checked) {
          showError(input, `${field.label} must be accepted.`);
          if (!firstInvalid) firstInvalid = input;
          valid = false;
        }
      } else if (!input.value.trim()) {
        showError(input, `${field.label} is required.`);
        if (!firstInvalid) firstInvalid = input;
        valid = false;
      }
    }
    if (firstInvalid) {
      firstInvalid.scrollIntoView({ behavior: 'smooth', block: 'center' });
      firstInvalid.focus();
    }
    return valid;
  }

  function previewForm(e) {
    if (!validateForm()) {
      e.preventDefault();
      e.stopPropagation();
      return false;
    }
    const data = new FormData(form);
    
    // Get duration value
    let duration = data.get('duration');
    
    // Generate evaluation ratings preview
    let ratingsHtml = '';
    for (let i = 1; i <= 9; i++) {
      const rating = data.get(`rating_${i}`) || 'Not rated';
      const criteria = [
        'Arrives to work on time / Available online as per schedule',
        'Demonstrates respect for organizational staff, policies, and norms',
        'Shows requisite understanding and ability to learn about organizational work',
        'Exhibits necessary skills required at the workplace',
        'Conducts self professionally in all work-related scenarios',
        'Takes initiative and seeks opportunities to make contributions',
        'Completes tasks and reports to supervisor on time',
        'Demonstrates the ability to work with others in a team',
        'Proves to be Reliable and Dependable'
      ];
      ratingsHtml += `<tr><td>${i}. ${criteria[i-1]}</td><td class="text-center"><strong>${rating}</strong></td></tr>`;
    }
    
    let html = `
      <table class="table table-bordered">
        <tbody>
          <tr><th>Date</th><td colspan="3">${data.get('date') || ''}</td></tr>
          <tr><th>Site Supervisor</th><td>${data.get('site_supervisor') || ''}</td>
              <th>Designation</th><td>${data.get('designation') || ''}</td></tr>
          <tr><th>Host Institution</th><td colspan="3">${data.get('host_institution') || ''}</td></tr>
          <tr><th>Student Intern Name</th><td colspan="3">${data.get('student_name') || ''}</td></tr>
          <tr><th>Student Program</th><td>${data.get('student_program') || ''}</td>
              <th>Semester</th><td>${data.get('semester') || ''}</td></tr>
          <tr><th>Starting Date</th><td>${data.get('start_date') || ''}</td>
              <th>Ending Date</th><td>${data.get('end_date') || ''}</td></tr>
          <tr><th>Internship Duration</th><td colspan="3">${duration ? duration + ' Weeks' : ''}</td></tr>
        </tbody>
      </table>
      <div class="section-title mt-4">Evaluation Ratings</div>
      <table class="table table-bordered">
        <thead>
          <tr><th>Criteria</th><th style="width: 100px;">Rating</th></tr>
        </thead>
        <tbody>
          ${ratingsHtml}
        </tbody>
      </table>
      <div class="mt-4">
        <div class="mt-4 text-center">
          <div><strong>Supervisor Agreement:</strong></div>
          <div class="text-success mt-2"><i class="bi bi-check-circle me-1"></i>Supervisor has agreed to the terms and conditions</div>
        </div>
        <div><strong>Date:</strong> ${data.get('supervisor_date') || formattedDate}</div>
        <div><strong>Contact Number:</strong> ${data.get('contact_number') || ''}</div>
        <div><strong>Official Email:</strong> ${data.get('official_email') || ''}</div>
      </div>
    `;
    document.getElementById('previewContent').innerHTML = html;
    previewModal.show();
    return true;
  }

  function printForm(e) {
    if (!validateForm()) {
      e.preventDefault();
      return false;
    }
    window.print();
  }

  function submitForm(e) {
    e.preventDefault();
    if (!validateForm()) return false;
    alert('Form submitted successfully!');
    form.reset();
    clearValidation();
  }

  document.getElementById('previewBtn').addEventListener('click', previewForm);
  document.getElementById('printBtn').addEventListener('click', printForm);
  
  form.addEventListener('submit', submitForm);
});
</script>

</body>
</html>
